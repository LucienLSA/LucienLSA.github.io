<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>golang语言基础学习 | Lucien</title><meta name="author" content="Shenao Lu,shenaolu0603@163.com"><meta name="copyright" content="Shenao Lu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="golang介绍 优势 部署快  直接编译成机器码 不依赖其他库 直接运行可部署  静态类型 编译时检查出隐藏的大多数问题 语言层面并发  并发 多核  标准库  runtime系统调度机制 高效的回收 丰富标准库  强项 云计算基础设施(docker&#x2F;kubernetes&#x2F;CDN)，后端软件，微服务(micro&#x2F;bilibili)，互联网基础设施 缺点  包管理大部分在github except">
<meta property="og:type" content="article">
<meta property="og:title" content="golang语言基础学习">
<meta property="og:url" content="https://lucienlsa.github.io/2024/07/05/Go/Basic/goBasic/index.html">
<meta property="og:site_name" content="Lucien">
<meta property="og:description" content="golang介绍 优势 部署快  直接编译成机器码 不依赖其他库 直接运行可部署  静态类型 编译时检查出隐藏的大多数问题 语言层面并发  并发 多核  标准库  runtime系统调度机制 高效的回收 丰富标准库  强项 云计算基础设施(docker&#x2F;kubernetes&#x2F;CDN)，后端软件，微服务(micro&#x2F;bilibili)，互联网基础设施 缺点  包管理大部分在github except">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2024/04/05/wLcfd8146Pilrt9.jpg">
<meta property="article:published_time" content="2024-07-05T11:35:11.939Z">
<meta property="article:modified_time" content="2024-07-25T13:41:52.968Z">
<meta property="article:author" content="Shenao Lu">
<meta property="article:tag" content="golang">
<meta property="article:tag" content="study">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2024/04/05/wLcfd8146Pilrt9.jpg"><link rel="shortcut icon" href="https://s2.loli.net/2024/04/03/hJcDCjPRvtpqdWs.png"><link rel="canonical" href="https://lucienlsa.github.io/2024/07/05/Go/Basic/goBasic/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'golang语言基础学习',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-25 21:41:52'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.1.1"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s2.loli.net/2024/04/04/oghnOyU3GQpPtKL.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">68</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">55</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">22</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s2.loli.net/2024/04/05/wLcfd8146Pilrt9.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Lucien"><span class="site-name">Lucien</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">golang语言基础学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-07-05T11:35:11.939Z" title="发表于 2024-07-05 19:35:11">2024-07-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-07-25T13:41:52.968Z" title="更新于 2024-07-25 21:41:52">2024-07-25</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/golang/">golang</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="golang语言基础学习"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>golang介绍</h1>
<h2 id="优势">优势</h2>
<h3 id="部署快">部署快</h3>
<ol>
<li>直接编译成机器码</li>
<li>不依赖其他库</li>
<li>直接运行可部署</li>
</ol>
<h3 id="静态类型">静态类型</h3>
<p>编译时检查出隐藏的大多数问题</p>
<h3 id="语言层面并发">语言层面并发</h3>
<ol>
<li>并发</li>
<li>多核</li>
</ol>
<h3 id="标准库">标准库</h3>
<ol>
<li>runtime系统调度机制</li>
<li>高效的回收</li>
<li>丰富标准库</li>
</ol>
<h2 id="强项">强项</h2>
<p>云计算基础设施(docker/kubernetes/CDN)，后端软件，微服务(micro/bilibili)，互联网基础设施</p>
<h2 id="缺点">缺点</h2>
<ol>
<li>包管理大部分在github</li>
<li>exception都用error来处理</li>
</ol>
<h1>go配置与基础使用</h1>
<h2 id="不需要配置GOPATH和GOROOT">不需要配置GOPATH和GOROOT</h2>
<h2 id="配置GOPROXY">配置GOPROXY</h2>
<p>修改GOPROXY</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go <span class="built_in">env</span> -w GOPROXY=https://goproxy.cn,direct</span><br></pre></td></tr></table></figure>
<h2 id="安装Go语言开发工具包">安装Go语言开发工具包</h2>
<p>vscode输入框&gt;go:install，全选</p>
<h2 id="配置代码片段快捷键">配置代码片段快捷键</h2>
<p>vscode输入框&gt;snippets，首选项：配置用户代码片段，go</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">	<span class="attr">&quot;println&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;prefix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pln&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;body&quot;</span><span class="punctuation">:</span><span class="string">&quot;fmt.Println($0)&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;println&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;printf&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;prefix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;plf&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;body&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fmt.Printf(\&quot;$0\&quot;)&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;printf&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="初始化golang项目">初始化golang项目</h2>
<p>在新建文件夹hello的终端&quot;ctrl `&quot;，打开，路径为新建文件夹hello</p>
<h3 id="通过go-mod-init初始化项目">通过go mod init初始化项目</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go mod init github.com/项目名称</span><br><span class="line">go mod init hello</span><br></pre></td></tr></table></figure>
<p>生成.mod文件<br>
可自己编写go文件</p>
<h2 id="golang-使用包-package-来管理定义模块，可以使用-import-关键字来导入使用">golang 使用包 package 来管理定义模块，可以使用 import 关键字来导入使用</h2>
<ol>
<li>如果导入的是 go 自带的包，则会去安装目录 $GOROOT/src 按包路径加载，如 fmt、encoding/json包</li>
<li>如果是我们 go get 安装或自定义的包，则会去 $GOPATH/src 下加载</li>
</ol>
<h3 id="跨平台编译">跨平台编译</h3>
<p>在windows下编译一个linux下可执行文件，指定目标操作系统平台和处理器，如windows平台cmd指定环境变量</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SET CGO_ENABLED=0 // 禁用CGO</span><br><span class="line">SET GOOS=linux // 目标平台为linux</span><br><span class="line">SET GOARCH=amd64 // 目标处理器框架为amd64</span><br></pre></td></tr></table></figure>
<h2 id="引入github上第三方包运行">引入github上第三方包运行</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go mod init demo1</span><br><span class="line">go get -u github.com/gin-gonic/gin</span><br></pre></td></tr></table></figure>
<p>编写demo1文件，一个小的web服务</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main <span class="comment">// 声明 main 包，表明当前是一个可执行程序</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123; <span class="comment">// main函数，是程序执行的入口 函数的花括号和函数名是在同一行，否则编译错误，分号;可以加或不加</span></span><br><span class="line">	r := gin.Default()</span><br><span class="line">	r.GET(<span class="string">&quot;/&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		c.String(<span class="number">200</span>, <span class="string">&quot;liwenzhou.com&quot;</span>)</span><br><span class="line">	&#125;)</span><br><span class="line">	r.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go build </span><br><span class="line">demo1.exe</span><br></pre></td></tr></table></figure>
<h3 id="go-mod-操作">go mod 操作</h3>
<ol>
<li>
<p>Go mod 删除错误或者不使用的modules<br>
go mod tidy</p>
</li>
<li>
<p>Go mod 初始化<br>
go mod init 模块名</p>
</li>
<li>
<p>Go mod 清理本地Cache<br>
go clean -modcache</p>
</li>
</ol>
<h2 id="变量声明">变量声明</h2>
<p>数据类型查看</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fmt.Printf(<span class="string">&quot;type of a = %T\n&quot;</span>, a)</span><br></pre></td></tr></table></figure>
<p>打印输出</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fmt.Println(<span class="string">&quot;a = &quot;</span>, a)</span><br><span class="line">fmt.Printf(<span class="string">&quot;cc = %s, type of cc = %T\n&quot;</span>, cc, cc)</span><br></pre></td></tr></table></figure>
<h3 id="默认为0">默认为0</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="type">int</span></span><br></pre></td></tr></table></figure>
<h3 id="初始化值">初始化值</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b <span class="type">int</span> = <span class="number">100</span></span><br></pre></td></tr></table></figure>
<h3 id="初始化省去数据类型，值自动匹配当前的变量数据类型">初始化省去数据类型，值自动匹配当前的变量数据类型</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> c = <span class="number">122</span></span><br></pre></td></tr></table></figure>
<h3 id="省去var关键字，直接自动匹配-最常用">省去var关键字，直接自动匹配(最常用)</h3>
<p>:= 但是只能在函数体内声明，不能声明全局变量</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e := <span class="number">100</span></span><br></pre></td></tr></table></figure>
<h3 id="多变量声明">多变量声明</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xx, yy <span class="type">int</span> = <span class="number">122</span>, <span class="number">344</span></span><br><span class="line"><span class="keyword">var</span> ii, te = <span class="number">123</span>, <span class="string">&quot;asd&quot;</span></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">	vv <span class="type">int</span> = <span class="number">222</span></span><br><span class="line">	jj <span class="type">bool</span> = <span class="literal">true</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="常量">常量</h2>
<p>const 定义枚举类型，常量不允许修改<br>
const() 添加一个关键字iota，每行的iota都累加1，第一行iota默认值为0</p>
<p><strong>iota 只能配合const的枚举实现</strong></p>
<p>但可读性不高</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	<span class="comment">// BEIJING=0</span></span><br><span class="line">	<span class="comment">// SHANGHAI = 1</span></span><br><span class="line">	<span class="comment">// SHENZHEN = 2</span></span><br><span class="line">	BEIJING = <span class="literal">iota</span> <span class="comment">// iota = 0</span></span><br><span class="line">	SHANGHAI <span class="comment">// iota = 1</span></span><br><span class="line">	SHENZHEN</span><br><span class="line">)</span><br><span class="line">	<span class="keyword">const</span> length <span class="type">int</span> = <span class="number">10</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	a, b = <span class="literal">iota</span> + <span class="number">1</span>, <span class="literal">iota</span> + <span class="number">2</span></span><br><span class="line">	c, d</span><br><span class="line">	e, f</span><br><span class="line"></span><br><span class="line">	g, h = <span class="literal">iota</span> * <span class="number">2</span>, <span class="literal">iota</span> * <span class="number">3</span></span><br><span class="line">	i, k</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="函数">函数</h2>
<h3 id="返回一个匿名值">返回一个匿名值</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo1</span><span class="params">(a <span class="type">string</span>, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;a = &quot;</span>, a)</span><br><span class="line">	fmt.Println(<span class="string">&quot;b = &quot;</span>, b)</span><br><span class="line">	c := <span class="number">100</span></span><br><span class="line">	<span class="keyword">return</span> c</span><br><span class="line">&#125;</span><br><span class="line">	c := foo1(<span class="string">&quot;abd&quot;</span>, <span class="number">555</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;c = &quot;</span>, c)</span><br><span class="line">	fmt.Print(<span class="string">&quot;\n&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="返回多个匿名值">返回多个匿名值</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo2</span><span class="params">(a <span class="type">string</span>, b <span class="type">int</span>)</span></span> (<span class="type">int</span>, <span class="type">int</span>) &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;a = &quot;</span>, a)</span><br><span class="line">	fmt.Println(<span class="string">&quot;b = &quot;</span>, b)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">666</span>, <span class="number">777</span></span><br><span class="line">&#125;</span><br><span class="line">	ret1, ret2 := foo2(<span class="string">&quot;haha&quot;</span>, <span class="number">999</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;ret1= &quot;</span>, ret1, <span class="string">&quot;ret2= &quot;</span>, ret2)</span><br></pre></td></tr></table></figure>
<h3 id="返回多个值，有形参名称">返回多个值，有形参名称</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo3</span><span class="params">(a <span class="type">string</span>, b <span class="type">int</span>)</span></span> (r1 <span class="type">int</span>, r2 <span class="type">int</span>) &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;---foo3---&quot;</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;a= &quot;</span>, a)</span><br><span class="line">	fmt.Println(<span class="string">&quot;b= &quot;</span>, b)</span><br><span class="line">	<span class="comment">// 给有名称的返回值变量赋值</span></span><br><span class="line">	r1 = <span class="number">1000</span></span><br><span class="line">	r2 = <span class="number">2000</span></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">	ret1, ret2 = foo3(<span class="string">&quot;foo3&quot;</span>, <span class="number">333</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;ret1= &quot;</span>, ret1, <span class="string">&quot;ret2= &quot;</span>, ret2)</span><br></pre></td></tr></table></figure>
<h3 id="当输出变量未进行赋值时，默认初始值0（因为已经定义了）">当输出变量未进行赋值时，默认初始值0（因为已经定义了）</h3>
<p>r1 r2为函数{}内的所有作用域空间</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo3</span><span class="params">(a <span class="type">string</span>, b <span class="type">int</span>)</span></span> (r1 <span class="type">int</span>, r2 <span class="type">int</span>) &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;---foo3---&quot;</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;a= &quot;</span>, a)</span><br><span class="line">	fmt.Println(<span class="string">&quot;b= &quot;</span>, b)</span><br><span class="line">	<span class="comment">// r1 r2属于foo3的形参</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;r1= &quot;</span>, r1)</span><br><span class="line">	fmt.Println(<span class="string">&quot;r1= &quot;</span>, r1)</span><br><span class="line">	<span class="comment">// 给有名称的返回值变量赋值</span></span><br><span class="line">	r1 = <span class="number">1000</span></span><br><span class="line">	r2 = <span class="number">2000</span></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="报错main-redeclared-in-this-block，other-declaration-of-main">报错main redeclared in this block，other declaration of main</h2>
<p>同一个目录下面不能有个多 package main<br>
<em>但还是能够执行相应的go文件</em></p>
<h3 id="解决方案">解决方案</h3>
<p>多套一个文件夹</p>
<h2 id="init函数与import调用包（未在-go-src-项目-的路径下">init函数与import调用包（未在[go/src/项目]的路径下</h2>
<p>在init项目文件夹下创建main.go和两个lib文件夹，其中各有lib.go</p>
<h3 id="调用包的函数">调用包的函数</h3>
<p>函数名必须以大写开头，才能被外部调用</p>
<h3 id="import-本地包出现的问题">import 本地包出现的问题</h3>
<h4 id="参考教程">参考教程</h4>
<p>[<a target="_blank" rel="noopener" href="https://www.liwenzhou.com/posts/Go/import-local-package/">https://www.liwenzhou.com/posts/Go/import-local-package/</a>](go module导入本地包)</p>
<h4 id="同一个项目下">同一个项目下</h4>
<p>只需在项目文件下执行<code>go mod init 项目名称</code></p>
<h4 id="不同项目下">不同项目下</h4>
<p>第一个主项目文件夹moduledemo，有main.go，执行调用第二个项目文件夹study，有4init/lib1下的函数Lib1Test()，两个项目都进行go mod init</p>
<p>main.go</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;study/4init/lib1&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	lib1.Lib1Test()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在moduledemo主项目的go.mod中添加依赖</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module moduledemo</span><br><span class="line"></span><br><span class="line">go 1.22.5</span><br><span class="line"></span><br><span class="line">require &quot;study&quot; v0.0.0</span><br><span class="line">replace &quot;study&quot; =&gt; &quot;../study&quot;</span><br></pre></td></tr></table></figure>
<p>最后在路径moduledemo项目下执行go run main.go</p>
<p><strong>如果在$GOPATH根目录下的项目，不用进行go module,，即go mod init</strong></p>
<h3 id="导入包，但不使用，进行匿名">导入包，但不使用，进行匿名</h3>
<p>起别名</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	_ <span class="string">&quot;study/4init/lib1&quot;</span></span><br><span class="line">	mylib2 <span class="string">&quot;study/4init/lib2&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// lib1.Lib1Test()</span></span><br><span class="line">	mylib2.Lib2Test()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>直接使用包的函数，但该方法容易引起歧义，不同包有相同的函数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	. <span class="string">&quot;study/4init/lib2&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	Lib2Test()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="指针">指针</h2>
<h3 id="值传递">值传递</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap1</span><span class="params">(a <span class="type">int</span>, b <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> temp <span class="type">int</span></span><br><span class="line">	temp = a</span><br><span class="line">	a = b</span><br><span class="line">	b = temp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="地址传递">地址传递</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap2</span><span class="params">(pa *<span class="type">int</span>, pb *<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> temp <span class="type">int</span></span><br><span class="line">	temp = *pa</span><br><span class="line">	*pa = *pb</span><br><span class="line">	*pb = temp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="二级指针">二级指针</h3>
<h2 id="defer关键字">defer关键字</h2>
<p>类似c++中的析构函数</p>
<h3 id="defer执行顺序">defer执行顺序</h3>
<p>栈</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">func1</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;A&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">func2</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;B&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">func3</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;C&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> func1()</span><br><span class="line">	<span class="keyword">defer</span> func2()</span><br><span class="line">	<span class="keyword">defer</span> func3()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="defer和return，先执行return">defer和return，先执行return</h3>
<p>defer皆在当前的函数周期结束之后，才会出栈</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">returnAndDefer</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> deferFunc()</span><br><span class="line">	<span class="keyword">return</span> returnFunc()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="切片slice">切片slice</h2>
<h3 id="数组">数组</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义打印数组函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printArray</span><span class="params">(myArray [10]<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 值拷贝(固定数组长度为10)，严格匹配数组类型</span></span><br><span class="line">	<span class="keyword">for</span> index, value := <span class="keyword">range</span> myArray &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;index = &quot;</span>, index, <span class="string">&quot;value = &quot;</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 固定长度的数组，默认初始值为0</span></span><br><span class="line">	<span class="keyword">var</span> myArray1 [<span class="number">10</span>]<span class="type">int</span></span><br><span class="line">	<span class="comment">// 数组赋值，其它默认为0</span></span><br><span class="line">	myArray2 := [<span class="number">10</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(myArray1); i++ &#123;</span><br><span class="line">		fmt.Println(myArray1[i])</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> index, value := <span class="keyword">range</span> myArray2 &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;index = &quot;</span>, index, <span class="string">&quot;value = &quot;</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 查看数组的数据类型</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;myArray1 type = %T\n&quot;</span>, myArray1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;myArray2 type = %T\n&quot;</span>, myArray2)</span><br><span class="line"></span><br><span class="line">	printArray(myArray1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="slice-动态数组">slice(动态数组)</h3>
<p>可变长度的同类型元素序列</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printArray1</span><span class="params">(myArray []<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 引用传递，传的是指针，数组长度任意且形参一致</span></span><br><span class="line">	<span class="comment">// _ 表示匿名的变量</span></span><br><span class="line">	<span class="keyword">for</span> _, value := <span class="keyword">range</span> myArray &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;value = &quot;</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">	myArray[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	myArray := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;myArray type is %T\n&quot;</span>, myArray)</span><br><span class="line">	printArray1(myArray)</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot; === &quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> _, value := <span class="keyword">range</span> myArray &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;value = &quot;</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="slice声明方式">slice声明方式</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 声明slice1是一个切片，初始化，默认值为1，2，3</span></span><br><span class="line">	slice1 := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 声明slice2是一个切片，但没有给slice分配空间</span></span><br><span class="line">	<span class="keyword">var</span> slice2 []<span class="type">int</span></span><br><span class="line">	slice2 = <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">3</span>) <span class="comment">// 开辟3个空间，默认值为0</span></span><br><span class="line">	slice2[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 声明slice3是一个切片，同时给slice分配空间，3个空间，初始值为0</span></span><br><span class="line">	<span class="keyword">var</span> slice3 []<span class="type">int</span> = <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">3</span>)</span><br><span class="line">	<span class="comment">// 声明slice4是一个切片，同时给slice分配空间，3个空间，初始值为0，通过:=推导slice是切片</span></span><br><span class="line">	slice4 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;len = %d, slice1 = %v\n&quot;</span>, <span class="built_in">len</span>(slice1), slice1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;len = %d, slice2 = %v\n&quot;</span>, <span class="built_in">len</span>(slice2), slice2)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;len = %d, slice3 = %v\n&quot;</span>, <span class="built_in">len</span>(slice3), slice3)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;len = %d, slice4 = %v\n&quot;</span>, <span class="built_in">len</span>(slice4), slice4)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 判断slice是否为0</span></span><br><span class="line">	<span class="keyword">if</span> slice1 == <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;slice1是一个空切片&quot;</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;slice1是有空间的&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="slice切片追加">slice切片追加</h3>
<p>长度是实际容纳的数量(左指针至右指针之间的距离)，容量是可以容纳的元素数量（左指针至底层数组末尾的距离）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> numbers = <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;len = %d, cap = %d, slice = %v\n&quot;</span>, <span class="built_in">len</span>(numbers), <span class="built_in">cap</span>(numbers), numbers)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 向numbers切片追加一个元素1，numbers len =4, [0,0,0,1], cap=5</span></span><br><span class="line">	numbers = <span class="built_in">append</span>(numbers, <span class="number">1</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;len = %d, cap = %d, slice = %v\n&quot;</span>, <span class="built_in">len</span>(numbers), <span class="built_in">cap</span>(numbers), numbers)</span><br><span class="line">	numbers = <span class="built_in">append</span>(numbers, <span class="number">3</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;len = %d, cap = %d, slice = %v\n&quot;</span>, <span class="built_in">len</span>(numbers), <span class="built_in">cap</span>(numbers), numbers)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 向容量cap已经满的slice追加元素，扩增当前slice容量的一倍</span></span><br><span class="line">	numbers = <span class="built_in">append</span>(numbers, <span class="number">5</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;len = %d, cap = %d, slice = %v\n&quot;</span>, <span class="built_in">len</span>(numbers), <span class="built_in">cap</span>(numbers), numbers)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="slcie截取">slcie截取</h3>
<p>类似python的数组切片<br>
<strong>注意理解切片和拷贝，对于底层数组影响</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line">	s1 := s[<span class="number">0</span>:<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">	fmt.Println(s1)</span><br><span class="line"></span><br><span class="line">	s1[<span class="number">0</span>] = <span class="number">100</span> <span class="comment">//s1和s指向底层的地址是一致的</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(s)</span><br><span class="line">	fmt.Println(s1) <span class="comment">// 都会被修改</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// copy将底层数组的slice一起拷贝</span></span><br><span class="line">	s2 := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 将s中的值依次拷贝到s2中</span></span><br><span class="line">	<span class="built_in">copy</span>(s2, s)</span><br><span class="line">	fmt.Println(s2) <span class="comment">// s2指向新的地址空间</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="map">map</h2>
<p>key是string类型，value是string类型</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 声明myMap1是一种map类型，key是string类型，value是string类型</span></span><br><span class="line">	<span class="keyword">var</span> myMap1 <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span></span><br><span class="line">	<span class="keyword">if</span> myMap1 == <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;myMap1 是一个空的map&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 使用map前，需要先用make给map分配数据空间</span></span><br><span class="line">	myMap1 = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">	myMap1[<span class="string">&quot;one&quot;</span>] = <span class="string">&quot;java&quot;</span></span><br><span class="line">	myMap1[<span class="string">&quot;two&quot;</span>] = <span class="string">&quot;c++&quot;</span></span><br><span class="line">	myMap1[<span class="string">&quot;three&quot;</span>] = <span class="string">&quot;python&quot;</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(myMap1)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 声明:=</span></span><br><span class="line">	myMap2 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">int</span>]<span class="type">string</span>)</span><br><span class="line">	myMap2[<span class="number">1</span>] = <span class="string">&quot;java&quot;</span></span><br><span class="line">	myMap2[<span class="number">2</span>] = <span class="string">&quot;c++&quot;</span></span><br><span class="line">	myMap2[<span class="number">3</span>] = <span class="string">&quot;python&quot;</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(myMap2)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 声明:=直接map</span></span><br><span class="line">	myMap3 := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>&#123;</span><br><span class="line">		<span class="string">&quot;one&quot;</span>:   <span class="string">&quot;php&quot;</span>,</span><br><span class="line">		<span class="string">&quot;two&quot;</span>:   <span class="string">&quot;c++&quot;</span>,</span><br><span class="line">		<span class="string">&quot;three&quot;</span>: <span class="string">&quot;python&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(myMap3)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="map使用方式">map使用方式</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printMap</span><span class="params">(cityMap <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// cityMap是一个引用传递</span></span><br><span class="line">	<span class="keyword">for</span> key, value := <span class="keyword">range</span> cityMap &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;key = &quot;</span>, key)</span><br><span class="line">		fmt.Println(<span class="string">&quot;value = &quot;</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ChangeValue</span><span class="params">(cityMap <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	cityMap[<span class="string">&quot;England&quot;</span>] = <span class="string">&quot;London&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	cityMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 添加</span></span><br><span class="line">	cityMap[<span class="string">&quot;China&quot;</span>] = <span class="string">&quot;Beijing&quot;</span></span><br><span class="line">	cityMap[<span class="string">&quot;Japan&quot;</span>] = <span class="string">&quot;Tokyo&quot;</span></span><br><span class="line">	cityMap[<span class="string">&quot;USA&quot;</span>] = <span class="string">&quot;NewYork&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 遍历</span></span><br><span class="line">	<span class="comment">// for key, value := range cityMap &#123;</span></span><br><span class="line">	<span class="comment">// 	fmt.Println(&quot;key = &quot;, key)</span></span><br><span class="line">	<span class="comment">// 	fmt.Println(&quot;value = &quot;, value)</span></span><br><span class="line">	<span class="comment">// &#125;</span></span><br><span class="line">	printMap(cityMap)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 删除</span></span><br><span class="line">	<span class="built_in">delete</span>(cityMap, <span class="string">&quot;China&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 修改</span></span><br><span class="line">	cityMap[<span class="string">&quot;USA&quot;</span>] = <span class="string">&quot;DC&quot;</span></span><br><span class="line">	ChangeValue(cityMap)</span><br><span class="line">	fmt.Println(<span class="string">&quot;-----&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 遍历</span></span><br><span class="line">	printMap(cityMap)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="面向对象编程（类-继承-多态）">面向对象编程（类/继承/多态）</h2>
<h3 id="struct结构体">struct结构体</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明一种行的数据类型 myint，对int的一个别名</span></span><br><span class="line"><span class="keyword">type</span> myint <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Book <span class="keyword">struct</span> &#123;</span><br><span class="line">	title <span class="type">string</span></span><br><span class="line">	auth  <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeBook</span><span class="params">(book Book)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 传递一个book的副本，值传递</span></span><br><span class="line">	book.auth = <span class="string">&quot;qwe&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeBook2</span><span class="params">(book *Book)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 指针传递</span></span><br><span class="line">	book.auth = <span class="string">&quot;sdf&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a myint = <span class="number">10</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;a = &quot;</span>, a)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;type of a = %T\n&quot;</span>, a)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> book1 Book</span><br><span class="line">	book1.title = <span class="string">&quot;Golang&quot;</span></span><br><span class="line">	book1.auth = <span class="string">&quot;lisi&quot;</span></span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, book1)</span><br><span class="line"></span><br><span class="line">	changeBook(book1)</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, book1)</span><br><span class="line"></span><br><span class="line">	changeBook2(&amp;book1)</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, book1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="class类">class类</h3>
<p>类名大写，其他包能够访问；类的方法名、属性名大写，该属性是外部可访问的（但区分c++中的公有与私有）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果类名首字母大写，其他包也能够访问</span></span><br><span class="line"><span class="keyword">type</span> Hero <span class="keyword">struct</span> &#123;</span><br><span class="line">	<span class="comment">// 如果类的属性首字母大写，表示该属性是对外能够访问的，否则只能够类的内部访问</span></span><br><span class="line">	Name  <span class="type">string</span></span><br><span class="line">	Ad    <span class="type">int</span></span><br><span class="line">	Level <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">func (this Hero) ShowName() &#123;</span></span><br><span class="line"><span class="comment">	fmt.Println(&quot;Name = &quot;, this.Name)</span></span><br><span class="line"><span class="comment">	fmt.Println(&quot;Ad = &quot;, this.Ad)</span></span><br><span class="line"><span class="comment">	fmt.Println(&quot;Level = &quot;, this.Level)</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">func (this Hero) GetName() string &#123;</span></span><br><span class="line"><span class="comment">	return this.Name</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">func (this Hero) SetName(newName string) &#123;</span></span><br><span class="line"><span class="comment">	// this 是调用该方法的对象的一个副本（拷贝），即值传递</span></span><br><span class="line"><span class="comment">	this.Name = newName</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 取地址，引用传递</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Hero)</span></span> ShowName() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Name = &quot;</span>, this.Name)</span><br><span class="line">	fmt.Println(<span class="string">&quot;Ad = &quot;</span>, this.Ad)</span><br><span class="line">	fmt.Println(<span class="string">&quot;Level = &quot;</span>, this.Level)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Hero)</span></span> GetName() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> this.Name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Hero)</span></span> SetName(newName <span class="type">string</span>) &#123;</span><br><span class="line">	this.Name = newName</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 创建一个对象</span></span><br><span class="line">	hero := Hero&#123;Name: <span class="string">&quot;zhang3&quot;</span>, Ad: <span class="number">100</span>, Level: <span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line">	hero.ShowName()</span><br><span class="line"></span><br><span class="line">	hero.SetName(<span class="string">&quot;li4&quot;</span>)</span><br><span class="line"></span><br><span class="line">	hero.ShowName()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="继承">继承</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Human <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="type">string</span></span><br><span class="line">	sex  <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Human)</span></span> Eat() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Human.Eat()...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Human)</span></span> Walk() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Human.Walk()...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//============</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> SuperMan <span class="keyword">struct</span> &#123;</span><br><span class="line">	Human <span class="comment">// SuperMan类继承Human类的方法</span></span><br><span class="line">	level <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重定义父类的方法Eat()</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *SuperMan)</span></span> Eat() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;SuperMan.Eat()...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义子类的新方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *SuperMan)</span></span> Fly() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;SuperMan.Fly()...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *SuperMan)</span></span> Print() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;name = &quot;</span>, this.name)</span><br><span class="line">	fmt.Println(<span class="string">&quot;sex = &quot;</span>, this.sex)</span><br><span class="line">	fmt.Println(<span class="string">&quot;level = &quot;</span>, this.level)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	h := Human&#123;<span class="string">&quot;zhang3&quot;</span>, <span class="string">&quot;female&quot;</span>&#125;</span><br><span class="line">	h.Eat()</span><br><span class="line">	h.Walk()</span><br><span class="line">	<span class="comment">// 定义子类对象</span></span><br><span class="line">	<span class="comment">// s := SuperMan&#123;Human&#123;&quot;li4&quot;, &quot;male&quot;&#125;, 88&#125;</span></span><br><span class="line">	<span class="keyword">var</span> s SuperMan</span><br><span class="line">	s.name = <span class="string">&quot;li4&quot;</span></span><br><span class="line">	s.sex = <span class="string">&quot;male&quot;</span></span><br><span class="line">	s.level = <span class="number">99</span></span><br><span class="line">	s.Eat()</span><br><span class="line">	s.Fly()</span><br><span class="line">	s.Walk()</span><br><span class="line">	s.Print()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="多态">多态</h3>
<ol>
<li>有一个父类（有接口）</li>
<li>有子类（实现了父类的全部接口方法）</li>
<li>父类类型的变量（指针） 指向（引用） 子类的具体数据变量</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 本质是一个指针</span></span><br><span class="line"><span class="keyword">type</span> AnimalIF <span class="keyword">interface</span> &#123; <span class="comment">// 接口，以下三个方法</span></span><br><span class="line">	Sleep()</span><br><span class="line">	GetColor() <span class="type">string</span> <span class="comment">// 获得动物的颜色</span></span><br><span class="line">	GetType() <span class="type">string</span>  <span class="comment">// 获取动物的种类</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体的类</span></span><br><span class="line"><span class="keyword">type</span> Cat <span class="keyword">struct</span> &#123;</span><br><span class="line">	color <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Cat)</span></span> Sleep() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Cat is Sleep&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Cat)</span></span> GetColor() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> this.color</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Cat)</span></span> GetType() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;Cat&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接口中的方法必须完全重写，才可实现接口，接口的指针能指向具体类</span></span><br><span class="line"><span class="comment">//  类似c++中的抽象类和虚函数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Dog <span class="keyword">struct</span> &#123;</span><br><span class="line">	color <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Dog)</span></span> Sleep() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Dog is Sleep&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Dog)</span></span> GetColor() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> this.color</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Dog)</span></span> GetType() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&quot;Dog&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">showAnimal</span><span class="params">(animal AnimalIF)</span></span> &#123;</span><br><span class="line">	animal.Sleep() <span class="comment">// 多态，传入对象</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;color = &quot;</span>, animal.GetColor())</span><br><span class="line">	fmt.Println(<span class="string">&quot;kind = &quot;</span>, animal.GetType())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 多态</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> animal AnimalIF <span class="comment">// 接口的数据类型，父类指针</span></span><br><span class="line">	animal = &amp;Cat&#123;<span class="string">&quot;Green&quot;</span>&#125;</span><br><span class="line">	animal.Sleep() <span class="comment">// 调用的Cat的Sleep()方法</span></span><br><span class="line">	animal = &amp;Dog&#123;<span class="string">&quot;Yellow&quot;</span>&#125;</span><br><span class="line">	animal.Sleep() <span class="comment">// 调用的Dog的Sleep()方法</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;----------&quot;</span>)</span><br><span class="line"></span><br><span class="line">	cat := Cat&#123;<span class="string">&quot;Green&quot;</span>&#125;</span><br><span class="line">	dog := Dog&#123;<span class="string">&quot;Yellow&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">	showAnimal(&amp;cat)</span><br><span class="line">	showAnimal(&amp;dog)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="通用万能类型">通用万能类型</h3>
<p>interface{}</p>
<ol>
<li>空接口</li>
<li>通用的万能数据类型，int/float64/string/struct，引用任意的数据类型</li>
<li>interface{}该如何区分，引用的底层数据类型是什么？给interface{}提供“类型断言”的机制</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myfunc</span><span class="params">(arg <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;myfunc is called:&quot;</span>)</span><br><span class="line">	fmt.Println(arg)</span><br><span class="line">	<span class="comment">// 增加断言机制，判断底层的数据类型</span></span><br><span class="line">	value, ok := arg.(<span class="type">string</span>)</span><br><span class="line">	<span class="keyword">if</span> !ok &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;myfunc is not a string type&quot;</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;string type, value = &quot;</span>, value)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;value type is %T\n&quot;</span>, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Book1 <span class="keyword">struct</span> &#123;</span><br><span class="line">	auth <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	book := Book1&#123;<span class="string">&quot;Golang&quot;</span>&#125;</span><br><span class="line">	myfunc(book)</span><br><span class="line">	myfunc(<span class="number">100</span>)</span><br><span class="line">	myfunc(<span class="string">&quot;abc&quot;</span>)</span><br><span class="line">	myfunc(<span class="number">3.14</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接口类型的嵌套是将一个接口类型作为另一个接口类型的一部分，嵌套的接口类型可以继承被嵌套接口类型的所有方法，并可以添加新的方法。</p>
<p>接口类型的扩展是在一个接口类型的基础上新增方法，被扩展的接口类型的实现类也必须实现新添加的方法。</p>
<p>嵌套和扩展的区别在于，嵌套是将接口类型作为另一个接口类型的一部分，而扩展是在接口类型的基础上新增方法。嵌套是一种组合关系，扩展是一种继承关系。</p>
<h2 id="反射">反射</h2>
<h3 id="变量的pair结构">变量的pair结构</h3>
<ol>
<li>变量由type和value。type分为static type(int/string…) 和 concrete type(interface指向的具体数据类型)</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// pair&lt;statictype:string, value:&quot;aeee&quot;</span></span><br><span class="line">	<span class="keyword">var</span> a <span class="type">string</span></span><br><span class="line">	a = <span class="string">&quot;aeee&quot;</span></span><br><span class="line">	fmt.Println(a)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// pair&lt;type:string, value:&quot;aeee&quot;</span></span><br><span class="line">	<span class="keyword">var</span> allType <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">	allType = a</span><br><span class="line"></span><br><span class="line">	str, _ := allType.(<span class="type">string</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;allType is &quot;</span>, str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>保持pair是连续不变的</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// tty: pair&lt;type:*os.File, value:&quot; &quot;文件描述符&gt;</span></span><br><span class="line">	tty, err := os.OpenFile(<span class="string">&quot;23.txt&quot;</span>, os.O_RDWR, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;Open file error!&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> r io.Reader <span class="comment">// io.Reader为interface&#123;&#125;</span></span><br><span class="line">	<span class="comment">// r: pair&lt;type:*os.File, value:&quot;&quot;文件描述符&gt;</span></span><br><span class="line">	r = tty</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> w io.Writer <span class="comment">// io.Writer为interface&#123;&#125;</span></span><br><span class="line">	<span class="comment">// w: pair&lt;type:*os.File, value:&quot; &quot;文件描述符&gt;</span></span><br><span class="line">	w = r.(io.Writer) <span class="comment">// r强制转换，赋值给w，pair不变</span></span><br><span class="line">	w.Write([]<span class="type">byte</span>(<span class="string">&quot;Hello lucien!\n&quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>断言有两步：得到动态类型 type，判断 type 是否实现了目标接口。这里断言成功是因为 type 是 Book，而 Book 实现了 Writer 接口，pair是不变的</p>
<p>断言成功有两种：1、两种类型是相同的 2、断言接口值(也就是r)实现了目标接口的所有方法所以才能断言成功，像这里的b、r应该都是Book*的数据类型</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Reader <span class="keyword">interface</span> &#123;</span><br><span class="line">	ReadBook()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Writer <span class="keyword">interface</span> &#123;</span><br><span class="line">	WriteBook()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体类型</span></span><br><span class="line"><span class="keyword">type</span> Book <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Book)</span></span> ReadBook() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Read a Book&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *Book)</span></span> WriteBook() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Write a Book&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// b: pair&lt;type:Book, value:book&#123;&#125;地址&gt;</span></span><br><span class="line">	b := &amp;Book&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// r: pair&lt;type:Book, value:Book&#123;&#125;地址&gt;</span></span><br><span class="line">	<span class="keyword">var</span> r Reader</span><br><span class="line">	r = b</span><br><span class="line">	r.ReadBook()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> w Writer</span><br><span class="line">	<span class="comment">// w: pair&lt;type:Book, value:Book&#123;&#125;地址&gt;</span></span><br><span class="line">	w = r.(Writer) <span class="comment">// 断言成功，因为w和r具体的type是一致的</span></span><br><span class="line">	w.WriteBook()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="reflect包的使用">reflect包的使用</h3>
<p>反射机制的使用可能会带来一定的性能损失，因此应该尽量避免过度使用反射。在编写代码时，应该尽可能地使用静态类型检查，避免在运行时进行类型检查和转换</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reflect.TypeOf(arg) <span class="comment">// 获取输入参数接口中值的类型，若接口为空则返回nil</span></span><br><span class="line">reflect.ValueOf(arg) <span class="comment">// 获取输入参数接口中的数据的值，若接口为空则返回0</span></span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id   <span class="type">int</span></span><br><span class="line">	Name <span class="type">string</span></span><br><span class="line">	Age  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this User)</span></span> Call() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;user is called ...&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, this)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	user := User&#123;<span class="number">1</span>, <span class="string">&quot;Aee&quot;</span>, <span class="number">18</span>&#125;</span><br><span class="line">	DoFiledAndMethod(user)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DoFiledAndMethod</span><span class="params">(input <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 获取input的type</span></span><br><span class="line">	inputType := reflect.TypeOf(input)</span><br><span class="line">	fmt.Println(<span class="string">&quot;inputType is :&quot;</span>, inputType.Name())</span><br><span class="line">	<span class="comment">// 获取input的value</span></span><br><span class="line">	inputValue := reflect.ValueOf(input)</span><br><span class="line">	fmt.Println(<span class="string">&quot;inputValue is :&quot;</span>, inputValue)</span><br><span class="line">	<span class="comment">// 通过type 获取里面的字段</span></span><br><span class="line">	<span class="comment">// 1. 获取interface的reflect.Type，通过Type得到NumField，进行遍历</span></span><br><span class="line">	<span class="comment">// 2. 得到的每个field，数据类型</span></span><br><span class="line">	<span class="comment">// 3. 通过field有一个Interface()方法得到对应的value</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; inputType.NumField(); i++ &#123;</span><br><span class="line">		field := inputType.Field(i)</span><br><span class="line">		value := inputValue.Field(i).Interface()</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%s: %v = %v\n&quot;</span>, field.Name, field.Type, value)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 通过type 获取里面的方法、调用</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; inputType.NumMethod(); i++ &#123;</span><br><span class="line">		m := inputType.Method(i)</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%s: %v\n&quot;</span>, m.Name, m.Type)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="结构体标签">结构体标签</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> resume <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="type">string</span> <span class="string">`info:&quot;name&quot; doc:&quot;我的名字&quot;`</span> <span class="comment">// 结构体标签说明</span></span><br><span class="line">	Sex  <span class="type">string</span> <span class="string">`info:&quot;sex&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findTag</span><span class="params">(str <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	t := reflect.TypeOf(str).Elem()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; t.NumField(); i++ &#123;</span><br><span class="line">		<span class="comment">// tagstring := t.Field(i).Tag.Get(&quot;info&quot;)</span></span><br><span class="line">		<span class="comment">// fmt.Println(&quot;info: &quot;, tagstring)</span></span><br><span class="line"></span><br><span class="line">		taginfo := t.Field(i).Tag.Get(<span class="string">&quot;info&quot;</span>)</span><br><span class="line">		tagdoc := t.Field(i).Tag.Get(<span class="string">&quot;doc&quot;</span>)</span><br><span class="line">		fmt.Println(<span class="string">&quot;info: &quot;</span>, taginfo, <span class="string">&quot; doc: &quot;</span>, tagdoc)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> re resume</span><br><span class="line">	findTag(&amp;re)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="结构体在标签的应用">结构体在标签的应用</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Movie <span class="keyword">struct</span> &#123;</span><br><span class="line">	<span class="comment">// Title  string   `json:&quot;title&quot;`</span></span><br><span class="line">	<span class="comment">// Year   int      `json:&quot;year&quot;`</span></span><br><span class="line">	<span class="comment">// Price  int      `json:&quot;rmb&quot;`</span></span><br><span class="line">	<span class="comment">// Actors []string `json:&quot;actors&quot;`</span></span><br><span class="line">	Title  <span class="type">string</span> <span class="comment">// 也可自动获取标签</span></span><br><span class="line">	Year   <span class="type">int</span></span><br><span class="line">	Price  <span class="type">int</span></span><br><span class="line">	Actors []<span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	movie := Movie&#123;<span class="string">&quot;喜剧之王&quot;</span>, <span class="number">2000</span>, <span class="number">10</span>, []<span class="type">string</span>&#123;<span class="string">&quot;周星驰&quot;</span>, <span class="string">&quot;张柏芝&quot;</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 编码 结构体转化为json</span></span><br><span class="line">	jsonStr, err := json.Marshal(movie)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;json marshal error&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;jsonStr = %s\n&quot;</span>, jsonStr)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 解码的过程 jsonstr转化为结构体</span></span><br><span class="line">	<span class="comment">// jsonStr = &#123;&quot;title&quot;:&quot;喜剧之王&quot;,&quot;year&quot;:2000,&quot;rmb&quot;:10,&quot;actors&quot;:[&quot;周星驰&quot;,&quot;张柏芝&quot;]&#125;</span></span><br><span class="line">	myMovie := Movie&#123;&#125;</span><br><span class="line">	err = json.Unmarshal(jsonStr, &amp;myMovie)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;json unmarshal error&quot;</span>, err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, myMovie)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="new和make">new和make</h2>
<h3 id="new">new</h3>
<p>返回一个指向新变量的指针，其变量的值未其类型的零值，new用于创建变量的指针，在堆上分配内存空间，返回的指针指向在堆上分配的变量，即在函数调用结束后仍然存在。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">new</span><span class="params">(Type)</span></span> *Type</span><br></pre></td></tr></table></figure>
<p>new只能创建变量的指针，而不能创建变量本身。new只分配了变量所需的内存空间</p>
<h3 id="make">make</h3>
<p>make用于创建特定类型的数据结构，如slice、map、channel</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">make</span><span class="params">(t Type, size ...IntegerType)</span></span> Type</span><br></pre></td></tr></table></figure>
<p>make函数创建的数据结构分配在堆上，返回一个引用，即指向数据结构的指针。make分配了变量所需的内存空间，并初始化变量的其他属性</p>
<h4 id="创建slice">创建slice</h4>
<p>make([]T, length, capacity)</p>
<h4 id="创建map">创建map</h4>
<p>make(map[T]U, capacity)</p>
<h4 id="创建channel">创建channel</h4>
<p>make(chan T, capacity)</p>
<h3 id=""></h3>
<p>var关键字用于声明变量，而new和make内置函数用于分配内存。var声明值类型的变量时，默认分配内存空间，并赋该类型的零值。</p>
<p>指针类型或引用类型的变量，不会被分配内存，默认为nil，若直接使用会异常</p>
<h2 id="值传递和引用传递">值传递和引用传递</h2>
<h3 id="值传递-2">值传递</h3>
<p>将参数的值复制一份，然后将复制的值传递给函数，函数对参数的修改不会影响到原始的值。常见的值类型如 int、float、bool 等都是值类型</p>
<h3 id="引用传递">引用传递</h3>
<p>将参数的地址复制一份，然后将复制的地址传递给函数，函数对参数的修改会影响到原始的值。常见的引用类型如 Slice、Map、Channel、指针等都是引用类型</p>
<p>在 Golang 中数组虽然是引用类型，但是它的传递却是值传递。这是因为 Golang 的数组长度是固定的，数组的值复制时会将整个数组的元素都复制一遍，因此传递数组时的开销较大，而且数组的长度也不可变，因此将数组的地址复制一份也无法修改原数组的长度</p>
<p><strong>Go语言特点</strong></p>
<p>引用类型和引用传递是 2 个概念，切记！！</p>
<p>Go语言中所有的传参都是值传递（传值），都是一个副本，一个拷贝。</p>
<p>参数如果是非引用类型（int、string、struct 等这些），这样就在函数中就无法修改原内容数据；如果是引用类型（指针、map、slice、chan等这些），这样就可以修改原内容数据。</p>
<p>是否可以修改原内容数据，和传值、传引用没有必然的关系。在 C++ 中，传引用肯定是可以修改原内容数据的，在 Go 语言里，虽然只有传值，但是我们也可以修改原内容数据，因为参数是引用类型。</p>
<p>Go 语言是没有引用传递的，在 C++ 中，函数参数的传递方式有引用传递。</p>
<h2 id="goroutine基本模型和调度设计策略">goroutine基本模型和调度设计策略</h2>
<h3 id="单进程时代的两个问题">单进程时代的两个问题</h3>
<ol>
<li>单一执行流程、计算机只能一个任务处理</li>
<li>进程阻塞所带来的cpu浪费时间</li>
</ol>
<h3 id="宏观执行多个任务（并发执行）">宏观执行多个任务（并发执行）</h3>
<p>多进程/多线程解决阻塞问题<br>
<img src="https://s2.loli.net/2024/07/10/IyrY2Z18sXeaPb9.png" alt="image.png"></p>
<p>进程/线程的数量越多，切换成本就越大，越是浪费<br>
<img src="https://s2.loli.net/2024/07/10/iFGhclVsXSw96pm.png" alt="image.png"></p>
<p>多线程有同步竞争（锁、竞争资源冲突等），开发设计越来越复杂，高消耗调度cpu，进程和线程占用内存导致高内存的占用</p>
<p>将一个线程切分成用户空间和内核空间（协程[co-route]和线程[thread]，互相绑定）</p>
<p><img src="https://s2.loli.net/2024/07/10/iUOkzI2wqme5MgD.png" alt="image.png"></p>
<h4 id="golang对协程处理">golang对协程处理</h4>
<p>协程(co-routine)改为Goroutine，内存几KB和灵活调度（常切换）</p>
<p>GMP（goroutine协程/processor处理器/thread线程）</p>
<p><img src="https://s2.loli.net/2024/07/10/fqz2yjaDbEBQUFW.png" alt="image.png"></p>
<p>Goroutine 可以通过 go 关键字启动，它会在一个独立的栈空间中执行相应的函数，可以在函数中执行阻塞和非阻塞操作。</p>
<p>要停止 Goroutine，需要使用 Go 语言提供的通道（channel）机制。可以在 Goroutine 中使用一个通道来接收停止信号，当主线程需要停止 Goroutine 时，向该通道发送一个信号即可。Goroutine 在执行任务的同时需要不断检测该通道是否有信号，如果有，则立即退出任务</p>
<h4 id="调度器的设计策略">调度器的设计策略</h4>
<ol>
<li>复用线程<br>
work stealing机制   hand off机制</li>
<li>利用并行<br>
GOMAXPROCS 限定P的个数 = CPU核数/2</li>
<li>抢占</li>
<li>全局G队列</li>
</ol>
<h3 id="创建goroutine">创建goroutine</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 副goroutine</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newTask</span><span class="params">()</span></span> &#123;</span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		i++</span><br><span class="line">		fmt.Printf(<span class="string">&quot;new Goroutine : i = %d\n&quot;</span>, i)</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主goroutine</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 创建一个go进程，执行newTask()流程</span></span><br><span class="line">	<span class="keyword">go</span> newTask()</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;main goroutine exit&quot;</span>)</span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		i++</span><br><span class="line">		fmt.Printf(<span class="string">&quot;main goroutine: i = %d\n&quot;</span>, i)</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="goexit">goexit</h3>
<ol>
<li>外函数退出</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;runtime&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// go创建承载一个形参为空，返回值为空的一个函数</span></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;A.defer&quot;</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="comment">//退出外函数</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 子函数</span></span><br><span class="line">		<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">			<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;B.defer&quot;</span>)</span><br><span class="line">			fmt.Println(<span class="string">&quot;B&quot;</span>)</span><br><span class="line">		&#125;()</span><br><span class="line"></span><br><span class="line">		fmt.Println(<span class="string">&quot;A&quot;</span>)</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 死循环</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>子函数先退出，再外函数退出</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;runtime&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// go创建承载一个形参为空，返回值为空的一个函数</span></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;A.defer&quot;</span>)</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 子函数</span></span><br><span class="line">		<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">			<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;B.defer&quot;</span>)</span><br><span class="line">			<span class="comment">// 退出当前的goroutine</span></span><br><span class="line">			runtime.Goexit()</span><br><span class="line">			fmt.Println(<span class="string">&quot;B&quot;</span>)</span><br><span class="line">		&#125;()</span><br><span class="line"></span><br><span class="line">		fmt.Println(<span class="string">&quot;A&quot;</span>)</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 死循环</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>有参</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 主go程得到当前go程的值，两个go程之间进行通信，则需要引入channl管道，不支持返回值</span></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(a <span class="type">int</span>, b <span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;a = &quot;</span>, a, <span class="string">&quot;, b = &quot;</span>, b)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">	&#125;(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 死循环</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="cap函数">cap函数</h2>
<ol>
<li>
<p>数组：cap() 函数返回数组的长度，因为数组的长度在创建时就已经确定了。</p>
</li>
<li>
<p>切片：cap() 函数返回切片的容量，即切片底层数组的长度，它可能大于或等于切片的长度。切片容量的大小是在切片创建时自动分配的，也可以通过对切片使用 append() 函数来改变容量大小。</p>
</li>
<li>
<p>Channel：cap() 函数返回 Channel 的容量，即 Channel 缓冲区的大小，只有在创建带缓冲的 Channel 时，才有意义。</p>
</li>
</ol>
<p>注意：cap() 函数只能作用于包含指针的数据类型，如数组、切片和 Channel，而不能用于值类型的数据类型，如整型、浮点型等。</p>
<h2 id="channel">channel</h2>
<h3 id="定义使用channel">定义使用channel</h3>
<p>channel能够同步两个不同go程，主要采用阻塞</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 定义一个channel</span></span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;goroutine结束&quot;</span>)</span><br><span class="line">		fmt.Println(<span class="string">&quot;goroutine 正在运行...&quot;</span>)</span><br><span class="line"></span><br><span class="line">		c &lt;- <span class="number">666</span> <span class="comment">// 将666发送给c</span></span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	num := &lt;-c <span class="comment">// 从c中接受数据，并赋值给num</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;num = &quot;</span>, num)</span><br><span class="line">	fmt.Println(<span class="string">&quot;main goroutine 结束...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">goroutine 正在运行...</span><br><span class="line">goroutine结束</span><br><span class="line">num =  666</span><br><span class="line">main goroutine 结束...</span><br></pre></td></tr></table></figure>
<h3 id="带缓冲和无缓冲的channel">带缓冲和无缓冲的channel</h3>
<ol>
<li>到达通道，还没开始执行发送或接收</li>
<li>左侧goroutine向通道发送数据的行为，goroutine在通道中被锁住，直到交换完成</li>
<li>右侧goroutine从通道里接收数据，goroutine也会在通道中被锁住，直到交换完成</li>
<li>交换后，两个goroutine从通道里出来，被锁住的goroutine得到释放，两个goroutine可以去做其他事情</li>
</ol>
<h3 id="有缓冲的channel">有缓冲的channel</h3>
<ol>
<li>右侧的goroutine正从通道中接收一个值</li>
<li>右侧的goroutine独立完成接收值的动作，左侧goroutine正发送一个新值到通道里</li>
<li>左侧的goroutine向通道发送新值，右侧的goroutine正在从通道接收另一个值，操作既不是同步，也不会相互阻塞</li>
<li>所有发送和接收都完成，通道里还有几个值，也有一些空间存更多的值</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">3</span>) <span class="comment">//带缓冲的channel</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;len(c) = &quot;</span>, <span class="built_in">len</span>(c), <span class="string">&quot;cap(c) = &quot;</span>, <span class="built_in">cap</span>(c))</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;子go程结束&quot;</span>)</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ &#123; <span class="comment">// for i := 0; i &lt; 4; i++</span></span><br><span class="line">			<span class="comment">// 当i为4时，channel已满发生阻塞，需等待channel中的空间</span></span><br><span class="line">			c &lt;- i</span><br><span class="line">			fmt.Println(<span class="string">&quot;子go程正在运行: len(c) = &quot;</span>, <span class="built_in">len</span>(c), <span class="string">&quot;, 发送的元素 = &quot;</span>, i, <span class="string">&quot;, cap(c) = &quot;</span>, <span class="built_in">cap</span>(c))</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	time.Sleep(<span class="number">2</span> * time.Second)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 主go程</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ &#123;</span><br><span class="line">		num := &lt;-c <span class="comment">// 从c中接收数据，并赋值给num</span></span><br><span class="line">		fmt.Println(<span class="string">&quot;num = &quot;</span>, num)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;main 结束&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>channel已满，再向里面写数据，就会阻塞<br>
channel为空，从里面取数据也会阻塞</p>
<h3 id="关闭channel">关闭channel</h3>
<p>如果不进行关闭，出现死锁。子go程执行完，主go程依然在等待数据，但没有数据进行传入，导致永远阻塞</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">			c &lt;- i</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// close 可关闭一个channel</span></span><br><span class="line">		<span class="built_in">close</span>(c)</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="comment">// 主go程</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="comment">// ok如果为true表示channel没有关闭，如果false表示channel已经关闭</span></span><br><span class="line">		<span class="keyword">if</span> data, ok := &lt;-c; ok &#123;</span><br><span class="line">			fmt.Println(data)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Main Finished...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>channel不需要经常关闭，只有当确实没有任何发送数据，显式结束range循环之类的，才关闭channel</li>
<li>关闭channel后，无法向channel再发送数据（引发panic错误后，导致接收立即返回零值），如果发完一个数据，就进行close，则报panic错误</li>
<li>关闭channel后，可以继续从channel接收数据</li>
<li>对nil channel，无论收发都会被阻塞</li>
</ol>
<h3 id="channel与range">channel与range</h3>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">			c &lt;- i</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// close 可关闭一个channel</span></span><br><span class="line">		<span class="built_in">close</span>(c)</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="comment">// 主go程</span></span><br><span class="line">	<span class="comment">// 用go程来迭代不断操作channel</span></span><br><span class="line">	<span class="keyword">for</span> data := <span class="keyword">range</span> c &#123;</span><br><span class="line">		fmt.Println(data)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Main Finished...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="channel与select">channel与select</h3>
<p>单个流程下一个go只能监控一个channel状态，select可以完成监控多个channel状态</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line">	<span class="keyword">case</span> &lt;- chan1:</span><br><span class="line">		<span class="comment">// 如果chan1成功读到数据，则进行该case语句</span></span><br><span class="line">	<span class="keyword">case</span> chan2 &lt;- <span class="number">1</span>:</span><br><span class="line">		<span class="comment">// 如果成功chan2写入数据，则进行case语句</span></span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		<span class="comment">// 如果上面都没有成功，则进入default处理流程</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fibonacii</span><span class="params">(c <span class="keyword">chan</span> <span class="type">int</span>, quit <span class="keyword">chan</span> <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	x, y := <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="keyword">select</span> &#123;</span><br><span class="line">		<span class="keyword">case</span> c &lt;- x:</span><br><span class="line">			<span class="comment">// 如果c可写，则case会进来</span></span><br><span class="line">			x = y</span><br><span class="line">			y = x + y</span><br><span class="line">		<span class="keyword">case</span> &lt;-quit:</span><br><span class="line">			fmt.Println(<span class="string">&quot;quit&quot;</span>)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">	quit := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// sub go</span></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">6</span>; i++ &#123;</span><br><span class="line">			fmt.Println(&lt;-c) <span class="comment">// c读数据，并打印出来</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		quit &lt;- <span class="number">0</span> <span class="comment">// 发送数字</span></span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 监控两个状态</span></span><br><span class="line">	<span class="comment">// main go</span></span><br><span class="line">	fibonacii(c, quit)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="同步锁">同步锁</h3>
<p>同步锁是通过 sync 包提供的 Mutex 类型</p>
<ol>
<li>
<p>互斥性：同一时刻只能有一个 Goroutine 持有锁，其他 Goroutine 需要等待锁的释放才能获取锁。</p>
</li>
<li>
<p>阻塞性：如果一个 Goroutine 尝试获取一个已经被其他 Goroutine 持有的锁，它会被阻塞，直到锁被释放。</p>
</li>
<li>
<p>公平性：锁的获取是公平的，即锁会按照申请的先后顺序分配给等待的 Goroutine，避免某些 Goroutine 永远无法获取锁的情况。</p>
</li>
</ol>
<p>同步锁的作用是保护共享数据，避免多个 Goroutine 同时对共享数据进行修改而导致的竞争条件和数据竞争问题。在需要保证共享数据的安全访问时，可以使用同步锁来对临界区进行加锁，以避免并发修改数据产生的问题。在使用同步锁时，需要注意避免死锁和饥饿等问题的发生，同时需要合理地设计锁的粒度和作用域，避免锁的竞争导致性能下降</p>
<h2 id="GOPATH的工作模式">GOPATH的工作模式</h2>
<h3 id="GOPATH弊端">GOPATH弊端</h3>
<ol>
<li>无版本控制概念</li>
<li>无法同步一致第三方版本号</li>
<li>无法指定当前项目引用的第三方版本号</li>
</ol>
<h3 id="go-mod-环境变量">go mod 环境变量</h3>
<h4 id="go-modules-模式">go modules 模式</h4>
<p>设置go111MODULE 高版本开启go modules模式</p>
<h4 id="GOPROXY">GOPROXY</h4>
<p>项目第三方依赖库的下载源地址</p>
<p>国内的地址  阿里云或者七牛云</p>
<p>direct 指示go回溯到模块版本的源地址抓取</p>
<h4 id="GOSUMDB">GOSUMDB</h4>
<h3 id="go-mod-命令">go mod 命令</h3>
<h4 id="go-modules模块">go modules模块</h4>
<ol>
<li>保证GO111MODULE=on</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go <span class="built_in">env</span> -w GO111MODULE=on</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>初始化项目<br>
任意文件夹创建项目，不要求在$GOPATH/src</li>
</ol>
<p>创建go.mod文件，同时写当前项目模块名称</p>
<p>生成go mod 文件</p>
<p>编写源代码 go mod tidy</p>
<p>go mod 文件添加一行新代码</p>
<p>会生成一个go.sum文件，当前项目直接或者间接的依赖所有模块版本，保证今后项目依赖的版本不会篡改</p>
<p>hash校验</p>
<h3 id="模块之间的依赖关系">模块之间的依赖关系</h3>
<p>修改go.mod文件的模块依赖</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://LucienLSA.github.io">Shenao Lu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://lucienlsa.github.io/2024/07/05/Go/Basic/goBasic/">https://lucienlsa.github.io/2024/07/05/Go/Basic/goBasic/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://LucienLSA.github.io" target="_blank">Lucien</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/golang/">golang</a><a class="post-meta__tags" href="/tags/study/">study</a></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2024/04/05/wLcfd8146Pilrt9.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/07/07/Python/spider/wallpaper/" title="爬虫项目-网站壁纸"><img class="cover" src="https://s2.loli.net/2024/04/05/Ivzr23MiNpQftUF.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">爬虫项目-网站壁纸</div></div></a></div><div class="next-post pull-right"><a href="/2024/07/04/Python/spider/wechat/" title="微信相关的爬虫项目"><img class="cover" src="https://s2.loli.net/2024/04/05/gPSBpWH4vMnhU6k.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">微信相关的爬虫项目</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/07/25/Go/Basic/InstantCommucate/" title="golang语言小项目-即时通信系统"><img class="cover" src="https://s2.loli.net/2024/07/28/UfeCvuXiw3D9xYL.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-25</div><div class="title">golang语言小项目-即时通信系统</div></div></a></div><div><a href="/2024/07/26/Go/ginFrame/ginBasic/" title="golang的gin框架学习"><img class="cover" src="https://s2.loli.net/2024/07/28/UfeCvuXiw3D9xYL.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-26</div><div class="title">golang的gin框架学习</div></div></a></div><div><a href="/2024/08/02/Go/gorm/gormBasic/" title="golang的gorm学习"><img class="cover" src="https://s2.loli.net/2024/04/05/JC6P4ycwDeEKRfl.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-02</div><div class="title">golang的gorm学习</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s2.loli.net/2024/04/04/oghnOyU3GQpPtKL.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Shenao Lu</div><div class="author-info__description">永远喜欢并相信鲜花，诗歌，黄昏，音乐的永恒性，就算在浓稠的寒冬里，也能随时随地用它们栽种出一个春天。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">68</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">55</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">22</div></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">没有你在我有多难熬，没有你烦我有多烦恼。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">golang介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%98%E5%8A%BF"><span class="toc-number">1.1.</span> <span class="toc-text">优势</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2%E5%BF%AB"><span class="toc-number">1.1.1.</span> <span class="toc-text">部署快</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.1.2.</span> <span class="toc-text">静态类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E8%A8%80%E5%B1%82%E9%9D%A2%E5%B9%B6%E5%8F%91"><span class="toc-number">1.1.3.</span> <span class="toc-text">语言层面并发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E5%BA%93"><span class="toc-number">1.1.4.</span> <span class="toc-text">标准库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%BA%E9%A1%B9"><span class="toc-number">1.2.</span> <span class="toc-text">强项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9"><span class="toc-number">1.3.</span> <span class="toc-text">缺点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">go配置与基础使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8D%E9%9C%80%E8%A6%81%E9%85%8D%E7%BD%AEGOPATH%E5%92%8CGOROOT"><span class="toc-number">2.1.</span> <span class="toc-text">不需要配置GOPATH和GOROOT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEGOPROXY"><span class="toc-number">2.2.</span> <span class="toc-text">配置GOPROXY</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Go%E8%AF%AD%E8%A8%80%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E5%8C%85"><span class="toc-number">2.3.</span> <span class="toc-text">安装Go语言开发工具包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="toc-number">2.4.</span> <span class="toc-text">配置代码片段快捷键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96golang%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.5.</span> <span class="toc-text">初始化golang项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87go-mod-init%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.5.1.</span> <span class="toc-text">通过go mod init初始化项目</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#golang-%E4%BD%BF%E7%94%A8%E5%8C%85-package-%E6%9D%A5%E7%AE%A1%E7%90%86%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8-import-%E5%85%B3%E9%94%AE%E5%AD%97%E6%9D%A5%E5%AF%BC%E5%85%A5%E4%BD%BF%E7%94%A8"><span class="toc-number">2.6.</span> <span class="toc-text">golang 使用包 package 来管理定义模块，可以使用 import 关键字来导入使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BC%96%E8%AF%91"><span class="toc-number">2.6.1.</span> <span class="toc-text">跨平台编译</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E5%85%A5github%E4%B8%8A%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85%E8%BF%90%E8%A1%8C"><span class="toc-number">2.7.</span> <span class="toc-text">引入github上第三方包运行</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#go-mod-%E6%93%8D%E4%BD%9C"><span class="toc-number">2.7.1.</span> <span class="toc-text">go mod 操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E"><span class="toc-number">2.8.</span> <span class="toc-text">变量声明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E4%B8%BA0"><span class="toc-number">2.8.1.</span> <span class="toc-text">默认为0</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%80%BC"><span class="toc-number">2.8.2.</span> <span class="toc-text">初始化值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9C%81%E5%8E%BB%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%80%BC%E8%87%AA%E5%8A%A8%E5%8C%B9%E9%85%8D%E5%BD%93%E5%89%8D%E7%9A%84%E5%8F%98%E9%87%8F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.8.3.</span> <span class="toc-text">初始化省去数据类型，值自动匹配当前的变量数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9C%81%E5%8E%BBvar%E5%85%B3%E9%94%AE%E5%AD%97%EF%BC%8C%E7%9B%B4%E6%8E%A5%E8%87%AA%E5%8A%A8%E5%8C%B9%E9%85%8D-%E6%9C%80%E5%B8%B8%E7%94%A8"><span class="toc-number">2.8.4.</span> <span class="toc-text">省去var关键字，直接自动匹配(最常用)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E"><span class="toc-number">2.8.5.</span> <span class="toc-text">多变量声明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E9%87%8F"><span class="toc-number">2.9.</span> <span class="toc-text">常量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">2.10.</span> <span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E5%8C%BF%E5%90%8D%E5%80%BC"><span class="toc-number">2.10.1.</span> <span class="toc-text">返回一个匿名值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E5%A4%9A%E4%B8%AA%E5%8C%BF%E5%90%8D%E5%80%BC"><span class="toc-number">2.10.2.</span> <span class="toc-text">返回多个匿名值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E5%A4%9A%E4%B8%AA%E5%80%BC%EF%BC%8C%E6%9C%89%E5%BD%A2%E5%8F%82%E5%90%8D%E7%A7%B0"><span class="toc-number">2.10.3.</span> <span class="toc-text">返回多个值，有形参名称</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BD%93%E8%BE%93%E5%87%BA%E5%8F%98%E9%87%8F%E6%9C%AA%E8%BF%9B%E8%A1%8C%E8%B5%8B%E5%80%BC%E6%97%B6%EF%BC%8C%E9%BB%98%E8%AE%A4%E5%88%9D%E5%A7%8B%E5%80%BC0%EF%BC%88%E5%9B%A0%E4%B8%BA%E5%B7%B2%E7%BB%8F%E5%AE%9A%E4%B9%89%E4%BA%86%EF%BC%89"><span class="toc-number">2.10.4.</span> <span class="toc-text">当输出变量未进行赋值时，默认初始值0（因为已经定义了）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%A5%E9%94%99main-redeclared-in-this-block%EF%BC%8Cother-declaration-of-main"><span class="toc-number">2.11.</span> <span class="toc-text">报错main redeclared in this block，other declaration of main</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">2.11.1.</span> <span class="toc-text">解决方案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#init%E5%87%BD%E6%95%B0%E4%B8%8Eimport%E8%B0%83%E7%94%A8%E5%8C%85%EF%BC%88%E6%9C%AA%E5%9C%A8-go-src-%E9%A1%B9%E7%9B%AE-%E7%9A%84%E8%B7%AF%E5%BE%84%E4%B8%8B"><span class="toc-number">2.12.</span> <span class="toc-text">init函数与import调用包（未在[go&#x2F;src&#x2F;项目]的路径下</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E5%8C%85%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">2.12.1.</span> <span class="toc-text">调用包的函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#import-%E6%9C%AC%E5%9C%B0%E5%8C%85%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">2.12.2.</span> <span class="toc-text">import 本地包出现的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%95%99%E7%A8%8B"><span class="toc-number">2.12.2.1.</span> <span class="toc-text">参考教程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8C%E4%B8%80%E4%B8%AA%E9%A1%B9%E7%9B%AE%E4%B8%8B"><span class="toc-number">2.12.2.2.</span> <span class="toc-text">同一个项目下</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E5%90%8C%E9%A1%B9%E7%9B%AE%E4%B8%8B"><span class="toc-number">2.12.2.3.</span> <span class="toc-text">不同项目下</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E5%8C%85%EF%BC%8C%E4%BD%86%E4%B8%8D%E4%BD%BF%E7%94%A8%EF%BC%8C%E8%BF%9B%E8%A1%8C%E5%8C%BF%E5%90%8D"><span class="toc-number">2.12.3.</span> <span class="toc-text">导入包，但不使用，进行匿名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E9%92%88"><span class="toc-number">2.13.</span> <span class="toc-text">指针</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%80%BC%E4%BC%A0%E9%80%92"><span class="toc-number">2.13.1.</span> <span class="toc-text">值传递</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E4%BC%A0%E9%80%92"><span class="toc-number">2.13.2.</span> <span class="toc-text">地址传递</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88"><span class="toc-number">2.13.3.</span> <span class="toc-text">二级指针</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#defer%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">2.14.</span> <span class="toc-text">defer关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#defer%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number">2.14.1.</span> <span class="toc-text">defer执行顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#defer%E5%92%8Creturn%EF%BC%8C%E5%85%88%E6%89%A7%E8%A1%8Creturn"><span class="toc-number">2.14.2.</span> <span class="toc-text">defer和return，先执行return</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%87%E7%89%87slice"><span class="toc-number">2.15.</span> <span class="toc-text">切片slice</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84"><span class="toc-number">2.15.1.</span> <span class="toc-text">数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#slice-%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84"><span class="toc-number">2.15.2.</span> <span class="toc-text">slice(动态数组)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#slice%E5%A3%B0%E6%98%8E%E6%96%B9%E5%BC%8F"><span class="toc-number">2.15.3.</span> <span class="toc-text">slice声明方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#slice%E5%88%87%E7%89%87%E8%BF%BD%E5%8A%A0"><span class="toc-number">2.15.4.</span> <span class="toc-text">slice切片追加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#slcie%E6%88%AA%E5%8F%96"><span class="toc-number">2.15.5.</span> <span class="toc-text">slcie截取</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#map"><span class="toc-number">2.16.</span> <span class="toc-text">map</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#map%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">2.16.1.</span> <span class="toc-text">map使用方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%EF%BC%88%E7%B1%BB-%E7%BB%A7%E6%89%BF-%E5%A4%9A%E6%80%81%EF%BC%89"><span class="toc-number">2.17.</span> <span class="toc-text">面向对象编程（类&#x2F;继承&#x2F;多态）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#struct%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-number">2.17.1.</span> <span class="toc-text">struct结构体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#class%E7%B1%BB"><span class="toc-number">2.17.2.</span> <span class="toc-text">class类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">2.17.3.</span> <span class="toc-text">继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E6%80%81"><span class="toc-number">2.17.4.</span> <span class="toc-text">多态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E4%B8%87%E8%83%BD%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.17.5.</span> <span class="toc-text">通用万能类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84"><span class="toc-number">2.18.</span> <span class="toc-text">反射</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%9A%84pair%E7%BB%93%E6%9E%84"><span class="toc-number">2.18.1.</span> <span class="toc-text">变量的pair结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reflect%E5%8C%85%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">2.18.2.</span> <span class="toc-text">reflect包的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E6%A0%87%E7%AD%BE"><span class="toc-number">2.18.3.</span> <span class="toc-text">结构体标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E5%9C%A8%E6%A0%87%E7%AD%BE%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-number">2.18.4.</span> <span class="toc-text">结构体在标签的应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#new%E5%92%8Cmake"><span class="toc-number">2.19.</span> <span class="toc-text">new和make</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#new"><span class="toc-number">2.19.1.</span> <span class="toc-text">new</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#make"><span class="toc-number">2.19.2.</span> <span class="toc-text">make</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAslice"><span class="toc-number">2.19.2.1.</span> <span class="toc-text">创建slice</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAmap"><span class="toc-number">2.19.2.2.</span> <span class="toc-text">创建map</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAchannel"><span class="toc-number">2.19.2.3.</span> <span class="toc-text">创建channel</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.19.3.</span> <span class="toc-text"></span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%80%BC%E4%BC%A0%E9%80%92%E5%92%8C%E5%BC%95%E7%94%A8%E4%BC%A0%E9%80%92"><span class="toc-number">2.20.</span> <span class="toc-text">值传递和引用传递</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%80%BC%E4%BC%A0%E9%80%92-2"><span class="toc-number">2.20.1.</span> <span class="toc-text">值传递</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E4%BC%A0%E9%80%92"><span class="toc-number">2.20.2.</span> <span class="toc-text">引用传递</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#goroutine%E5%9F%BA%E6%9C%AC%E6%A8%A1%E5%9E%8B%E5%92%8C%E8%B0%83%E5%BA%A6%E8%AE%BE%E8%AE%A1%E7%AD%96%E7%95%A5"><span class="toc-number">2.21.</span> <span class="toc-text">goroutine基本模型和调度设计策略</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E8%BF%9B%E7%A8%8B%E6%97%B6%E4%BB%A3%E7%9A%84%E4%B8%A4%E4%B8%AA%E9%97%AE%E9%A2%98"><span class="toc-number">2.21.1.</span> <span class="toc-text">单进程时代的两个问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8F%E8%A7%82%E6%89%A7%E8%A1%8C%E5%A4%9A%E4%B8%AA%E4%BB%BB%E5%8A%A1%EF%BC%88%E5%B9%B6%E5%8F%91%E6%89%A7%E8%A1%8C%EF%BC%89"><span class="toc-number">2.21.2.</span> <span class="toc-text">宏观执行多个任务（并发执行）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#golang%E5%AF%B9%E5%8D%8F%E7%A8%8B%E5%A4%84%E7%90%86"><span class="toc-number">2.21.2.1.</span> <span class="toc-text">golang对协程处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B0%83%E5%BA%A6%E5%99%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E7%AD%96%E7%95%A5"><span class="toc-number">2.21.2.2.</span> <span class="toc-text">调度器的设计策略</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAgoroutine"><span class="toc-number">2.21.3.</span> <span class="toc-text">创建goroutine</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#goexit"><span class="toc-number">2.21.4.</span> <span class="toc-text">goexit</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cap%E5%87%BD%E6%95%B0"><span class="toc-number">2.22.</span> <span class="toc-text">cap函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#channel"><span class="toc-number">2.23.</span> <span class="toc-text">channel</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E4%BD%BF%E7%94%A8channel"><span class="toc-number">2.23.1.</span> <span class="toc-text">定义使用channel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%A6%E7%BC%93%E5%86%B2%E5%92%8C%E6%97%A0%E7%BC%93%E5%86%B2%E7%9A%84channel"><span class="toc-number">2.23.2.</span> <span class="toc-text">带缓冲和无缓冲的channel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E7%BC%93%E5%86%B2%E7%9A%84channel"><span class="toc-number">2.23.3.</span> <span class="toc-text">有缓冲的channel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E9%97%ADchannel"><span class="toc-number">2.23.4.</span> <span class="toc-text">关闭channel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#channel%E4%B8%8Erange"><span class="toc-number">2.23.5.</span> <span class="toc-text">channel与range</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#channel%E4%B8%8Eselect"><span class="toc-number">2.23.6.</span> <span class="toc-text">channel与select</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E9%94%81"><span class="toc-number">2.23.7.</span> <span class="toc-text">同步锁</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GOPATH%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.24.</span> <span class="toc-text">GOPATH的工作模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#GOPATH%E5%BC%8A%E7%AB%AF"><span class="toc-number">2.24.1.</span> <span class="toc-text">GOPATH弊端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#go-mod-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">2.24.2.</span> <span class="toc-text">go mod 环境变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#go-modules-%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.24.2.1.</span> <span class="toc-text">go modules 模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GOPROXY"><span class="toc-number">2.24.2.2.</span> <span class="toc-text">GOPROXY</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GOSUMDB"><span class="toc-number">2.24.2.3.</span> <span class="toc-text">GOSUMDB</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#go-mod-%E5%91%BD%E4%BB%A4"><span class="toc-number">2.24.3.</span> <span class="toc-text">go mod 命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#go-modules%E6%A8%A1%E5%9D%97"><span class="toc-number">2.24.3.1.</span> <span class="toc-text">go modules模块</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E4%B9%8B%E9%97%B4%E7%9A%84%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB"><span class="toc-number">2.24.4.</span> <span class="toc-text">模块之间的依赖关系</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/02/Go/gorm/gormBasic/" title="golang的gorm学习">golang的gorm学习</a><time datetime="2024-08-02T03:30:25.547Z" title="发表于 2024-08-02 11:30:25">2024-08-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/28/DataStructure/CodeCapriccio/" title="代码随想录学习">代码随想录学习</a><time datetime="2024-07-28T02:54:57.754Z" title="发表于 2024-07-28 10:54:57">2024-07-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/27/MySQL/MysqlPrinciple/" title="MYSQL底层原理学习">MYSQL底层原理学习</a><time datetime="2024-07-27T07:16:57.126Z" title="发表于 2024-07-27 15:16:57">2024-07-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/26/Go/ginFrame/ginBasic/" title="golang的gin框架学习">golang的gin框架学习</a><time datetime="2024-07-26T13:50:23.325Z" title="发表于 2024-07-26 21:50:23">2024-07-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/25/Go/Basic/InstantCommucate/" title="golang语言小项目-即时通信系统">golang语言小项目-即时通信系统</a><time datetime="2024-07-25T13:41:36.973Z" title="发表于 2024-07-25 21:41:36">2024-07-25</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Shenao Lu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-heart.min.js" async="async" mobile="false"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>